(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{24:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n(19),a=n.n(c),o=n(10),u=n(4),s=(n(24),n(0)),i=function(e){var t=e.addToDirectory,n=e.newName,r=e.addNewName,c=e.newNumber,a=e.addNewNumber;return Object(s.jsx)("form",{onSubmit:t,children:Object(s.jsxs)("table",{children:[Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"name:"})," ",Object(s.jsx)("td",{children:Object(s.jsx)("input",{value:n,onChange:r})})]}),Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:"number:"})," ",Object(s.jsx)("td",{children:Object(s.jsx)("input",{value:c,onChange:a})})]}),Object(s.jsx)("tr",{children:Object(s.jsx)("td",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})})]})})},l=function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.name}),Object(s.jsx)("td",{children:e.number}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{value:e.id,name:e.name,onClick:e.deleteContact,children:"delete"})})]})},d=function(e){var t=e.persons,n=e.filterName,r=e.deleteContact;return Object(s.jsx)("table",{children:t.map((function(e){return e.name.toLowerCase().includes(n.toLowerCase())?Object(s.jsx)(l,{id:e.id,name:e.name,number:e.number,deleteContact:r}):""}))})},j=function(e){var t=e.filterName,n=e.searchName;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{children:["filter shown with: ",Object(s.jsx)("input",{value:t,onChange:n})]})})},b=n(3),f=n.n(b),h=n(5),m=n(6),O=n.n(m),p="/api/persons",x=function(){var e=Object(h.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.a.get(p),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.post(p,t),e.next=3,n;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=O.a.delete("".concat(p,"/").concat(t)),e.next=3,n;case 3:return r=e.sent,console.log(r),e.abrupt("return",r.status);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(f.a.mark((function e(t,n){var r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.a.put("".concat(p,"/").concat(t),n),e.next=3,r;case 3:return c=e.sent,console.log(c),e.abrupt("return",c.status);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N={getAll:x,addContact:v,deleteContact:g,updateContact:w},C=function(e){var t=e.message,n=e.errorClass;return null===t?null:Object(s.jsx)("div",{className:n?"message":"error",children:Object(s.jsx)("p",{children:t})})},y=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),l=Object(u.a)(a,2),b=l[0],f=l[1],h=Object(r.useState)(""),m=Object(u.a)(h,2),O=m[0],p=m[1],x=Object(r.useState)(""),v=Object(u.a)(x,2),g=v[0],w=v[1],y=Object(r.useState)(""),k=Object(u.a)(y,2),S=k[0],A=k[1],T=Object(r.useState)(!1),D=Object(u.a)(T,2),E=D[0],I=D[1];Object(r.useEffect)((function(){N.getAll().then((function(e){c(e)}))}),[]),console.log(n);return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(C,{message:S,errorClass:E}),Object(s.jsx)(j,{filterName:g,searchName:function(e){console.log(e.target.value),w(e.target.value)}}),Object(s.jsx)("h2",{children:"Add a new"}),Object(s.jsx)(i,{addToDirectory:function(e){if(e.preventDefault(),""===b||""===O)return A("name/number field cannot be empty"),I(!1),void setTimeout((function(){A(null),I(!1)}),5e3);var t=n.reduce((function(e,t){return console.log("Checked"),t.name===b&&(e=Object(o.a)(Object(o.a)({},t),{},{number:O})),e}),{});if(t.hasOwnProperty("id"))return window.confirm("".concat(t.name," is already added to phonebook, replace the old number with new one?"))&&N.updateContact(t.id,t).then((function(e){return 200===e&&N.getAll().then((function(e){c(e)})),t.name})).then((function(e){A("".concat(e,"'s number modified successfully")),I(!0)})),setTimeout((function(){A(null),I(!1)}),5e3),f(""),void p("");var r={name:b,number:O};N.addContact(r).then((function(e){return c(n.concat(e)),b})).then((function(e){A("".concat(e," added successfully")),I(!0)})).catch((function(e){console.log(e.response.data),A(e.response.data.error),I(!1)})),setTimeout((function(){A(null),I(!1)}),5e3),f(""),p("")},newName:b,addNewName:function(e){console.log(e.target.value),f(e.target.value)},newNumber:O,addNewNumber:function(e){console.log(e.target.value),p(e.target.value)}}),Object(s.jsx)("h2",{children:"Numbers"}),console.log(g),Object(s.jsx)(d,{persons:n,filterName:g,deleteContact:function(e){e.preventDefault(),console.log("id",e.target.value),window.confirm("Delete ".concat(e.target.name,"?"))&&N.deleteContact(e.target.value).then((function(t){200===t&&N.getAll().then((function(t){return c(t),e.target.name})).then((function(t){A("".concat(e.target.name," deleted successfully")),I(!1)}))})).catch((function(t){A("Information of ".concat(e.target.name," has already been removed from the server")),I(!1)})),setTimeout((function(){A(null),I(!1)}),5e3),console.log("After deletion",n)}})]})};a.a.render(Object(s.jsx)(y,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.2975d731.chunk.js.map