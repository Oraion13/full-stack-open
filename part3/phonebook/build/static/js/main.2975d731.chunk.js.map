{"version":3,"sources":["components/PersonForm.js","components/Note.js","components/Persons.js","components/Filter.js","services/bookService.js","components/Notification.js","App.js","index.js"],"names":["PersonForms","addToDirectory","newName","addNewName","newNumber","addNewNumber","onSubmit","value","onChange","type","Note","props","name","number","id","onClick","deleteContact","Persons","persons","filterName","map","person","toLowerCase","includes","Filter","searchName","baseURL","getAll","a","request","axios","get","response","data","addContact","newNote","post","delete","console","log","status","updateContact","newContact","put","Notification","message","errorClass","className","App","useState","setPersons","setNewName","setNewNumber","setFilterName","errorMessage","setErrorMessage","setErrorClass","useEffect","bookService","then","responseData","event","target","PersonForm","preventDefault","setTimeout","checkContact","reduce","prev","current","hasOwnProperty","window","confirm","newPerson","concat","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2975d731.chunk.js","sourcesContent":["const PersonForms = ({\r\n  addToDirectory,\r\n  newName,\r\n  addNewName,\r\n  newNumber,\r\n  addNewNumber,\r\n}) => {\r\n  return (\r\n    <form onSubmit={addToDirectory}>\r\n      <table>\r\n        <tr>\r\n          <td>name:</td>{\" \"}\r\n          <td>\r\n            <input value={newName} onChange={addNewName} />\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>number:</td>{\" \"}\r\n          <td>\r\n            <input value={newNumber} onChange={addNewNumber} />\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>\r\n            <button type=\"submit\">add</button>\r\n          </td>\r\n        </tr>\r\n      </table>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForms;\r\n","const Note = (props) => (\r\n  <tr>\r\n    <td>{props.name}</td>\r\n    <td>{props.number}</td>\r\n    <td>\r\n      <button value={props.id} name={props.name} onClick={props.deleteContact}>\r\n        delete\r\n      </button>\r\n    </td>\r\n  </tr>\r\n);\r\n\r\nexport default Note;\r\n","import Note from \"./Note\";\r\n\r\nconst Persons = ({ persons, filterName, deleteContact }) => {\r\n  return (\r\n    <table>\r\n      {persons.map((person) => {\r\n        if (person[\"name\"].toLowerCase().includes(filterName.toLowerCase())) {\r\n          return (\r\n            <Note\r\n              id={person[\"id\"]}\r\n              name={person[\"name\"]}\r\n              number={person[\"number\"]}\r\n              deleteContact={deleteContact}\r\n            />\r\n          );\r\n        }\r\n        return \"\";\r\n      })}\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","const Filter = ({ filterName, searchName }) => {\r\n  return (\r\n    <>\r\n      <form>\r\n        filter shown with: <input value={filterName} onChange={searchName} />\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import axios from \"axios\";\r\n\r\nconst baseURL = \"/api/persons\"; // /api/persons\r\n\r\nconst getAll = async () => {\r\n  const request = axios.get(baseURL);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst addContact = async (newNote) => {\r\n  const request = axios.post(baseURL, newNote);\r\n  const response = await request;\r\n  return response.data;\r\n};\r\n\r\nconst deleteContact = async (id) => {\r\n  const request = axios.delete(`${baseURL}/${id}`);\r\n  const response = await request;\r\n  console.log(response);\r\n  return response.status;\r\n};\r\n\r\nconst updateContact = async (id, newContact) => {\r\n  const request = axios.put(`${baseURL}/${id}`, newContact);\r\n  const response = await request;\r\n  console.log(response);\r\n  return response.status;\r\n};\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n  getAll,\r\n  addContact,\r\n  deleteContact,\r\n  updateContact,\r\n};\r\n","\r\nconst Notification = ({message, errorClass}) => {\r\n    if(message === null) return null\r\n\r\n    return(\r\n        <div className={errorClass ? \"message\" : \"error\"}>\r\n            <p>{message}</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Notification;","import React, { useEffect, useState } from \"react\";\nimport \"./index.css\";\nimport PersonForms from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport bookService from \"./services/bookService\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterName, setFilterName] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const [errorClass, setErrorClass] = useState(false);\n\n  //Get first response from server\n  useEffect(() => {\n    bookService.getAll().then((responseData) => {\n      setPersons(responseData);\n    });\n  }, []);\n\n  console.log(persons);\n  const addNewName = (event) => {\n    console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const addNewNumber = (event) => {\n    console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const searchName = (event) => {\n    console.log(event.target.value);\n    setFilterName(event.target.value);\n  };\n\n  const addToDirectory = (event) => {\n    event.preventDefault();\n\n    if (newName === \"\" || newNumber === \"\") {\n      setErrorMessage(`name/number field cannot be empty`);\n      setErrorClass(false);\n\n      setTimeout(() => {\n        setErrorMessage(null);\n        setErrorClass(false);\n      }, 5000);\n\n      return;\n    }\n\n    const checkContact = persons.reduce((prev, current) => {\n      console.log(\"Checked\");\n      if (current[\"name\"] === newName) {\n        prev = { ...current, number: newNumber };\n      }\n      return prev;\n    }, {});\n\n    if (checkContact.hasOwnProperty(\"id\")) {\n      if (\n        window.confirm(\n          `${checkContact.name} is already added to phonebook, replace the old number with new one?`\n        )\n      ) {\n        bookService\n          .updateContact(checkContact.id, checkContact)\n          .then((status) => {\n            if (status === 200) {\n              bookService.getAll().then((responseData) => {\n                setPersons(responseData);\n              });\n            }\n            return checkContact.name;\n          })\n          .then((name) => {\n            setErrorMessage(`${name}'s number modified successfully`);\n            setErrorClass(true);\n          });\n      }\n\n      setTimeout(() => {\n        setErrorMessage(null);\n        setErrorClass(false);\n      }, 5000);\n\n      setNewName(\"\");\n      setNewNumber(\"\");\n\n      return;\n    }\n\n    const newPerson = { name: newName, number: newNumber };\n    //Add new Contact, promise chain\n    bookService\n      .addContact(newPerson)\n      .then((responseData) => {\n        setPersons(persons.concat(responseData));\n        return newName;\n      })\n      .then((name) => {\n        setErrorMessage(`${name} added successfully`);\n        setErrorClass(true);\n      })\n      .catch((error) => {\n        console.log(error.response.data);\n        setErrorMessage(error.response.data.error);\n        setErrorClass(false);\n      });\n\n    setTimeout(() => {\n      setErrorMessage(null);\n      setErrorClass(false);\n    }, 5000);\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  //To delete a contact\n  const deleteContact = (event) => {\n    event.preventDefault();\n    console.log(\"id\", event.target.value);\n\n    //Promise chain\n    if (window.confirm(`Delete ${event.target.name}?`)) {\n      bookService\n        .deleteContact(event.target.value)\n        .then((status) => {\n          if (status === 200) {\n            bookService\n              .getAll()\n              .then((responseData) => {\n                setPersons(responseData);\n                return event.target.name;\n              })\n              .then((name) => {\n                setErrorMessage(`${event.target.name} deleted successfully`);\n                setErrorClass(false);\n              });\n          }\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `Information of ${event.target.name} has already been removed from the server`\n          );\n          setErrorClass(false);\n        });\n    }\n\n    setTimeout(() => {\n      setErrorMessage(null);\n      setErrorClass(false);\n    }, 5000);\n    console.log(\"After deletion\", persons);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} errorClass={errorClass} />\n      <Filter filterName={filterName} searchName={searchName} />\n      <h2>Add a new</h2>\n      <PersonForms\n        addToDirectory={addToDirectory}\n        newName={newName}\n        addNewName={addNewName}\n        newNumber={newNumber}\n        addNewNumber={addNewNumber}\n      />\n      <h2>Numbers</h2>\n      {console.log(filterName)}\n      <Persons\n        persons={persons}\n        filterName={filterName}\n        deleteContact={deleteContact}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}